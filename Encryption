#include <iostream>
#include <conio.h>
#include <fstream>
#include <string>

using namespace std;

string encrypt(string pin){
    for(int i=0; i<pin.size(); i++){
        pin[i] = pin[i] + 200;
    }
return pin;
}

string decrypt(string pin){
    for(int i=0; i<pin.size(); i++){
        pin[i] = pin[i] - 200;
    }
return pin;
}

int main(){
    string pin;
    char ch;

    cout << "Enter PIN (4 or 6 digits.). Press Enter to continue: "; //pwede mag-backspace
     
     while(true){
        ch = _getch();
 
        if(ch == 8){ //ascii val ng backspace
            if(!pin.empty()){
                pin.pop_back();
                cout<<"\b \b";
            }
        }else if(isdigit(ch)){
            if(pin.length() < 6){
                pin += ch;
                cout << '*';
            }
        }else if (ch == 13){ //ascii val ng enter
            if(pin.length() == 4 || pin.length() == 6){
                break;
            }else{
                cout << "\nInvalid input. PIN must be 4 or 6 digits.";
                pin.clear();
                cout << "Enter PIN (4 or 6 digits.). Press Enter to continue: "; //pwede mag-backspace
            }
        }
     }
    ofstream file("encrypted.txt");
    if (file.is_open()) {
        file << encrypt(pin);
        file.close();
    } else {
        cout << "Unable to open file for writing." << endl;
    }

    string x;

    ifstream File("encrypted.txt");
    if (File.is_open()) {
        File >> x;
        pin = decrypt(x);
        File.close();
    } else {
        cout << "Unable to open file for reading." << endl;
    }

    cout << "\nDecrypted PIN: " << pin << endl;

return 0;
}